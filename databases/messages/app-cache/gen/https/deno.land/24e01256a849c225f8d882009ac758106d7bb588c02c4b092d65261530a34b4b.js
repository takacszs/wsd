// Copyright 2018-2022 the Deno authors. All rights reserved. MIT license.
import * as DenoUnstable from "../../_deno_unstable.ts";
import { fromFileUrl } from "../path.ts";
function getValidTime(time, name) {
    if (typeof time === "string") {
        time = Number(time);
    }
    if (typeof time === "number" && (Number.isNaN(time) || !Number.isFinite(time))) {
        throw new Deno.errors.InvalidData(`invalid ${name}, must not be infinity or NaN`);
    }
    return time;
}
export function utimes(path, atime, mtime, callback) {
    path = path instanceof URL ? fromFileUrl(path) : path;
    if (!callback) {
        throw new Deno.errors.InvalidData("No callback function supplied");
    }
    atime = getValidTime(atime, "atime");
    mtime = getValidTime(mtime, "mtime");
    DenoUnstable.utime(path, atime, mtime).then(()=>callback(null), callback);
}
export function utimesSync(path, atime, mtime) {
    path = path instanceof URL ? fromFileUrl(path) : path;
    atime = getValidTime(atime, "atime");
    mtime = getValidTime(mtime, "mtime");
    DenoUnstable.utimeSync(path, atime, mtime);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjEzMi4wL25vZGUvX2ZzL19mc191dGltZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbmltcG9ydCAqIGFzIERlbm9VbnN0YWJsZSBmcm9tIFwiLi4vLi4vX2Rlbm9fdW5zdGFibGUudHNcIjtcbmltcG9ydCB0eXBlIHsgQ2FsbGJhY2tXaXRoRXJyb3IgfSBmcm9tIFwiLi9fZnNfY29tbW9uLnRzXCI7XG5pbXBvcnQgeyBmcm9tRmlsZVVybCB9IGZyb20gXCIuLi9wYXRoLnRzXCI7XG5cbmZ1bmN0aW9uIGdldFZhbGlkVGltZShcbiAgdGltZTogbnVtYmVyIHwgc3RyaW5nIHwgRGF0ZSxcbiAgbmFtZTogc3RyaW5nLFxuKTogbnVtYmVyIHwgRGF0ZSB7XG4gIGlmICh0eXBlb2YgdGltZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRpbWUgPSBOdW1iZXIodGltZSk7XG4gIH1cblxuICBpZiAoXG4gICAgdHlwZW9mIHRpbWUgPT09IFwibnVtYmVyXCIgJiZcbiAgICAoTnVtYmVyLmlzTmFOKHRpbWUpIHx8ICFOdW1iZXIuaXNGaW5pdGUodGltZSkpXG4gICkge1xuICAgIHRocm93IG5ldyBEZW5vLmVycm9ycy5JbnZhbGlkRGF0YShcbiAgICAgIGBpbnZhbGlkICR7bmFtZX0sIG11c3Qgbm90IGJlIGluZmluaXR5IG9yIE5hTmAsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB0aW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXRpbWVzKFxuICBwYXRoOiBzdHJpbmcgfCBVUkwsXG4gIGF0aW1lOiBudW1iZXIgfCBzdHJpbmcgfCBEYXRlLFxuICBtdGltZTogbnVtYmVyIHwgc3RyaW5nIHwgRGF0ZSxcbiAgY2FsbGJhY2s6IENhbGxiYWNrV2l0aEVycm9yLFxuKTogdm9pZCB7XG4gIHBhdGggPSBwYXRoIGluc3RhbmNlb2YgVVJMID8gZnJvbUZpbGVVcmwocGF0aCkgOiBwYXRoO1xuXG4gIGlmICghY2FsbGJhY2spIHtcbiAgICB0aHJvdyBuZXcgRGVuby5lcnJvcnMuSW52YWxpZERhdGEoXCJObyBjYWxsYmFjayBmdW5jdGlvbiBzdXBwbGllZFwiKTtcbiAgfVxuXG4gIGF0aW1lID0gZ2V0VmFsaWRUaW1lKGF0aW1lLCBcImF0aW1lXCIpO1xuICBtdGltZSA9IGdldFZhbGlkVGltZShtdGltZSwgXCJtdGltZVwiKTtcblxuICBEZW5vVW5zdGFibGUudXRpbWUocGF0aCwgYXRpbWUsIG10aW1lKS50aGVuKCgpID0+IGNhbGxiYWNrKG51bGwpLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1dGltZXNTeW5jKFxuICBwYXRoOiBzdHJpbmcgfCBVUkwsXG4gIGF0aW1lOiBudW1iZXIgfCBzdHJpbmcgfCBEYXRlLFxuICBtdGltZTogbnVtYmVyIHwgc3RyaW5nIHwgRGF0ZSxcbik6IHZvaWQge1xuICBwYXRoID0gcGF0aCBpbnN0YW5jZW9mIFVSTCA/IGZyb21GaWxlVXJsKHBhdGgpIDogcGF0aDtcbiAgYXRpbWUgPSBnZXRWYWxpZFRpbWUoYXRpbWUsIFwiYXRpbWVcIik7XG4gIG10aW1lID0gZ2V0VmFsaWRUaW1lKG10aW1lLCBcIm10aW1lXCIpO1xuXG4gIERlbm9VbnN0YWJsZS51dGltZVN5bmMocGF0aCwgYXRpbWUsIG10aW1lKTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwRUFBMEU7QUFDMUUsWUFBWSxZQUFZLE1BQU0seUJBQXlCLENBQUM7QUFFeEQsU0FBUyxXQUFXLFFBQVEsWUFBWSxDQUFDO0FBRXpDLFNBQVMsWUFBWSxDQUNuQixJQUE0QixFQUM1QixJQUFZLEVBQ0c7SUFDZixJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUM1QixJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxJQUNFLE9BQU8sSUFBSSxLQUFLLFFBQVEsSUFDeEIsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUM5QztRQUNBLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FDL0IsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLDZCQUE2QixDQUFDLENBQy9DLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsT0FBTyxTQUFTLE1BQU0sQ0FDcEIsSUFBa0IsRUFDbEIsS0FBNkIsRUFDN0IsS0FBNkIsRUFDN0IsUUFBMkIsRUFDckI7SUFDTixJQUFJLEdBQUcsSUFBSSxZQUFZLEdBQUcsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBRXRELElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDYixNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsK0JBQStCLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsS0FBSyxHQUFHLFlBQVksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDckMsS0FBSyxHQUFHLFlBQVksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFckMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFNLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUM5RSxDQUFDO0FBRUQsT0FBTyxTQUFTLFVBQVUsQ0FDeEIsSUFBa0IsRUFDbEIsS0FBNkIsRUFDN0IsS0FBNkIsRUFDdkI7SUFDTixJQUFJLEdBQUcsSUFBSSxZQUFZLEdBQUcsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RELEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3JDLEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRXJDLFlBQVksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM3QyxDQUFDIn0=