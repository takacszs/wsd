import { templates } from "./containers.ts";
import { copyProps, XMLEscape } from "./utils.ts";
import EtaErr from "./err.ts";
/* END TYPES */ /**
 * Include a template based on its name (or filepath, if it's already been cached).
 *
 * Called like `include(templateNameOrPath, data)`
 */ function includeHelper(templateNameOrPath, data) {
    const template = this.templates.get(templateNameOrPath);
    if (!template) {
        throw EtaErr('Could not fetch template "' + templateNameOrPath + '"');
    }
    return template(data, this);
}
/** Eta's base (global) configuration */ const config = {
    async: false,
    autoEscape: true,
    autoTrim: [
        false,
        "nl"
    ],
    cache: false,
    e: XMLEscape,
    include: includeHelper,
    parse: {
        exec: "",
        interpolate: "=",
        raw: "~"
    },
    plugins: [],
    rmWhitespace: false,
    tags: [
        "<%",
        "%>"
    ],
    templates: templates,
    useWith: false,
    varName: "it"
};
/**
 * Takes one or two partial (not necessarily complete) configuration objects, merges them 1 layer deep into eta.config, and returns the result
 *
 * @param override Partial configuration object
 * @param baseConfig Partial configuration object to merge before `override`
 *
 * **Example**
 *
 * ```js
 * let customConfig = getConfig({tags: ['!#', '#!']})
 * ```
 */ function getConfig(override, baseConfig) {
    // TODO: run more tests on this
    const res = {}; // Linked
    copyProps(res, config); // Creates deep clone of eta.config, 1 layer deep
    if (baseConfig) {
        copyProps(res, baseConfig);
    }
    if (override) {
        copyProps(res, override);
    }
    return res;
}
/** Update Eta's base config */ function configure(options) {
    return copyProps(config, options);
}
export { config, configure, getConfig };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZXRhQHYyLjAuMC9jb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGVtcGxhdGVzIH0gZnJvbSBcIi4vY29udGFpbmVycy50c1wiO1xuaW1wb3J0IHsgY29weVByb3BzLCBYTUxFc2NhcGUgfSBmcm9tIFwiLi91dGlscy50c1wiO1xuaW1wb3J0IEV0YUVyciBmcm9tIFwiLi9lcnIudHNcIjtcblxuLyogVFlQRVMgKi9cblxuaW1wb3J0IHR5cGUgeyBUZW1wbGF0ZUZ1bmN0aW9uIH0gZnJvbSBcIi4vY29tcGlsZS50c1wiO1xuaW1wb3J0IHR5cGUgeyBDYWNoZXIgfSBmcm9tIFwiLi9zdG9yYWdlLnRzXCI7XG5cbnR5cGUgdHJpbUNvbmZpZyA9IFwibmxcIiB8IFwic2x1cnBcIiB8IGZhbHNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIEV0YUNvbmZpZyB7XG4gIC8qKiBXaGV0aGVyIG9yIG5vdCB0byBhdXRvbWF0aWNhbGx5IFhNTC1lc2NhcGUgaW50ZXJwb2xhdGlvbnMuIERlZmF1bHQgdHJ1ZSAqL1xuICBhdXRvRXNjYXBlOiBib29sZWFuO1xuXG4gIC8qKiBDb25maWd1cmUgYXV0b21hdGljIHdoaXRlc3BhY2UgdHJpbW1pbmcuIERlZmF1bHQgYFtmYWxzZSwgJ25sJ11gICovXG4gIGF1dG9UcmltOiB0cmltQ29uZmlnIHwgW3RyaW1Db25maWcsIHRyaW1Db25maWddO1xuXG4gIC8qKiBDb21waWxlIHRvIGFzeW5jIGZ1bmN0aW9uICovXG4gIGFzeW5jOiBib29sZWFuO1xuXG4gIC8qKiBXaGV0aGVyIG9yIG5vdCB0byBjYWNoZSB0ZW1wbGF0ZXMgaWYgYG5hbWVgIG9yIGBmaWxlbmFtZWAgaXMgcGFzc2VkICovXG4gIGNhY2hlOiBib29sZWFuO1xuXG4gIC8qKiBYTUwtZXNjYXBpbmcgZnVuY3Rpb24gKi9cbiAgZTogKHN0cjogc3RyaW5nKSA9PiBzdHJpbmc7XG5cbiAgLyoqIFBhcnNpbmcgb3B0aW9ucyAqL1xuICBwYXJzZToge1xuICAgIC8qKiBXaGljaCBwcmVmaXggdG8gdXNlIGZvciBldmFsdWF0aW9uLiBEZWZhdWx0IGBcIlwiYCAqL1xuICAgIGV4ZWM6IHN0cmluZztcblxuICAgIC8qKiBXaGljaCBwcmVmaXggdG8gdXNlIGZvciBpbnRlcnBvbGF0aW9uLiBEZWZhdWx0IGBcIj1cImAgKi9cbiAgICBpbnRlcnBvbGF0ZTogc3RyaW5nO1xuXG4gICAgLyoqIFdoaWNoIHByZWZpeCB0byB1c2UgZm9yIHJhdyBpbnRlcnBvbGF0aW9uLiBEZWZhdWx0IGBcIn5cImAgKi9cbiAgICByYXc6IHN0cmluZztcbiAgfTtcblxuICAvKiogQXJyYXkgb2YgcGx1Z2lucyAqL1xuICBwbHVnaW5zOiBBcnJheTxcbiAgICB7XG4gICAgICBwcm9jZXNzRm5TdHJpbmc/OiBGdW5jdGlvbjtcbiAgICAgIHByb2Nlc3NBU1Q/OiBGdW5jdGlvbjtcbiAgICAgIHByb2Nlc3NUZW1wbGF0ZT86IEZ1bmN0aW9uO1xuICAgIH1cbiAgPjtcblxuICAvKiogUmVtb3ZlIGFsbCBzYWZlLXRvLXJlbW92ZSB3aGl0ZXNwYWNlICovXG4gIHJtV2hpdGVzcGFjZTogYm9vbGVhbjtcblxuICAvKiogRGVsaW1pdGVyczogYnkgZGVmYXVsdCBgWyc8JScsICclPiddYCAqL1xuICB0YWdzOiBbc3RyaW5nLCBzdHJpbmddO1xuXG4gIC8qKiBIb2xkcyB0ZW1wbGF0ZSBjYWNoZSAqL1xuICB0ZW1wbGF0ZXM6IENhY2hlcjxUZW1wbGF0ZUZ1bmN0aW9uPjtcblxuICAvKiogTmFtZSBvZiB0aGUgZGF0YSBvYmplY3QuIERlZmF1bHQgYGl0YCAqL1xuICB2YXJOYW1lOiBzdHJpbmc7XG5cbiAgLyoqIEFic29sdXRlIHBhdGggdG8gdGVtcGxhdGUgZmlsZSAqL1xuICBmaWxlbmFtZT86IHN0cmluZztcblxuICAvKiogSG9sZHMgY2FjaGUgb2YgcmVzb2x2ZWQgZmlsZXBhdGhzLiBTZXQgdG8gYGZhbHNlYCB0byBkaXNhYmxlICovXG4gIGZpbGVwYXRoQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgZmFsc2U7XG5cbiAgLyoqIEEgZmlsdGVyIGZ1bmN0aW9uIGFwcGxpZWQgdG8gZXZlcnkgaW50ZXJwb2xhdGlvbiBvciByYXcgaW50ZXJwb2xhdGlvbiAqL1xuICBmaWx0ZXI/OiBGdW5jdGlvbjtcblxuICAvKiogRnVuY3Rpb24gdG8gaW5jbHVkZSB0ZW1wbGF0ZXMgYnkgbmFtZSAqL1xuICBpbmNsdWRlPzogRnVuY3Rpb247XG5cbiAgLyoqIEZ1bmN0aW9uIHRvIGluY2x1ZGUgdGVtcGxhdGVzIGJ5IGZpbGVwYXRoICovXG4gIGluY2x1ZGVGaWxlPzogRnVuY3Rpb247XG5cbiAgLyoqIE5hbWUgb2YgdGVtcGxhdGUgKi9cbiAgbmFtZT86IHN0cmluZztcblxuICAvKiogV2hlcmUgc2hvdWxkIGFic29sdXRlIHBhdGhzIGJlZ2luPyBEZWZhdWx0ICcvJyAqL1xuICByb290Pzogc3RyaW5nO1xuXG4gIC8qKiBNYWtlIGRhdGEgYXZhaWxhYmxlIG9uIHRoZSBnbG9iYWwgb2JqZWN0IGluc3RlYWQgb2YgdmFyTmFtZSAqL1xuICB1c2VXaXRoPzogYm9vbGVhbjtcblxuICAvKiogV2hldGhlciBvciBub3QgdG8gY2FjaGUgdGVtcGxhdGVzIGlmIGBuYW1lYCBvciBgZmlsZW5hbWVgIGlzIHBhc3NlZDogZHVwbGljYXRlIG9mIGBjYWNoZWAgKi9cbiAgXCJ2aWV3IGNhY2hlXCI/OiBib29sZWFuO1xuXG4gIC8qKiBEaXJlY3Rvcnkgb3IgZGlyZWN0b3JpZXMgdGhhdCBjb250YWluIHRlbXBsYXRlcyAqL1xuICB2aWV3cz86IHN0cmluZyB8IEFycmF5PHN0cmluZz47XG5cbiAgW2luZGV4OiBzdHJpbmddOiBhbnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV0YUNvbmZpZ1dpdGhGaWxlbmFtZSBleHRlbmRzIEV0YUNvbmZpZyB7XG4gIGZpbGVuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFBhcnRpYWxDb25maWcgPSBQYXJ0aWFsPEV0YUNvbmZpZz47XG5leHBvcnQgdHlwZSBQYXJ0aWFsQXN5bmNDb25maWcgPSBQYXJ0aWFsQ29uZmlnICYgeyBhc3luYzogdHJ1ZSB9O1xuXG4vKiBFTkQgVFlQRVMgKi9cblxuLyoqXG4gKiBJbmNsdWRlIGEgdGVtcGxhdGUgYmFzZWQgb24gaXRzIG5hbWUgKG9yIGZpbGVwYXRoLCBpZiBpdCdzIGFscmVhZHkgYmVlbiBjYWNoZWQpLlxuICpcbiAqIENhbGxlZCBsaWtlIGBpbmNsdWRlKHRlbXBsYXRlTmFtZU9yUGF0aCwgZGF0YSlgXG4gKi9cblxuZnVuY3Rpb24gaW5jbHVkZUhlbHBlcihcbiAgdGhpczogRXRhQ29uZmlnLFxuICB0ZW1wbGF0ZU5hbWVPclBhdGg6IHN0cmluZyxcbiAgZGF0YTogb2JqZWN0LFxuKTogc3RyaW5nIHtcbiAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlcy5nZXQodGVtcGxhdGVOYW1lT3JQYXRoKTtcbiAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgIHRocm93IEV0YUVycignQ291bGQgbm90IGZldGNoIHRlbXBsYXRlIFwiJyArIHRlbXBsYXRlTmFtZU9yUGF0aCArICdcIicpO1xuICB9XG4gIHJldHVybiB0ZW1wbGF0ZShkYXRhLCB0aGlzKTtcbn1cblxuLyoqIEV0YSdzIGJhc2UgKGdsb2JhbCkgY29uZmlndXJhdGlvbiAqL1xuY29uc3QgY29uZmlnOiBFdGFDb25maWcgPSB7XG4gIGFzeW5jOiBmYWxzZSxcbiAgYXV0b0VzY2FwZTogdHJ1ZSxcbiAgYXV0b1RyaW06IFtmYWxzZSwgXCJubFwiXSxcbiAgY2FjaGU6IGZhbHNlLFxuICBlOiBYTUxFc2NhcGUsXG4gIGluY2x1ZGU6IGluY2x1ZGVIZWxwZXIsXG4gIHBhcnNlOiB7XG4gICAgZXhlYzogXCJcIixcbiAgICBpbnRlcnBvbGF0ZTogXCI9XCIsXG4gICAgcmF3OiBcIn5cIixcbiAgfSxcbiAgcGx1Z2luczogW10sXG4gIHJtV2hpdGVzcGFjZTogZmFsc2UsXG4gIHRhZ3M6IFtcIjwlXCIsIFwiJT5cIl0sXG4gIHRlbXBsYXRlczogdGVtcGxhdGVzLFxuICB1c2VXaXRoOiBmYWxzZSxcbiAgdmFyTmFtZTogXCJpdFwiLFxufTtcblxuLyoqXG4gKiBUYWtlcyBvbmUgb3IgdHdvIHBhcnRpYWwgKG5vdCBuZWNlc3NhcmlseSBjb21wbGV0ZSkgY29uZmlndXJhdGlvbiBvYmplY3RzLCBtZXJnZXMgdGhlbSAxIGxheWVyIGRlZXAgaW50byBldGEuY29uZmlnLCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0XG4gKlxuICogQHBhcmFtIG92ZXJyaWRlIFBhcnRpYWwgY29uZmlndXJhdGlvbiBvYmplY3RcbiAqIEBwYXJhbSBiYXNlQ29uZmlnIFBhcnRpYWwgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gbWVyZ2UgYmVmb3JlIGBvdmVycmlkZWBcbiAqXG4gKiAqKkV4YW1wbGUqKlxuICpcbiAqIGBgYGpzXG4gKiBsZXQgY3VzdG9tQ29uZmlnID0gZ2V0Q29uZmlnKHt0YWdzOiBbJyEjJywgJyMhJ119KVxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gZ2V0Q29uZmlnKG92ZXJyaWRlOiBQYXJ0aWFsQ29uZmlnLCBiYXNlQ29uZmlnPzogRXRhQ29uZmlnKTogRXRhQ29uZmlnIHtcbiAgLy8gVE9ETzogcnVuIG1vcmUgdGVzdHMgb24gdGhpc1xuXG4gIGNvbnN0IHJlczogUGFydGlhbENvbmZpZyA9IHt9OyAvLyBMaW5rZWRcbiAgY29weVByb3BzKHJlcywgY29uZmlnKTsgLy8gQ3JlYXRlcyBkZWVwIGNsb25lIG9mIGV0YS5jb25maWcsIDEgbGF5ZXIgZGVlcFxuXG4gIGlmIChiYXNlQ29uZmlnKSB7XG4gICAgY29weVByb3BzKHJlcywgYmFzZUNvbmZpZyk7XG4gIH1cblxuICBpZiAob3ZlcnJpZGUpIHtcbiAgICBjb3B5UHJvcHMocmVzLCBvdmVycmlkZSk7XG4gIH1cblxuICByZXR1cm4gcmVzIGFzIEV0YUNvbmZpZztcbn1cblxuLyoqIFVwZGF0ZSBFdGEncyBiYXNlIGNvbmZpZyAqL1xuXG5mdW5jdGlvbiBjb25maWd1cmUob3B0aW9uczogUGFydGlhbENvbmZpZyk6IFBhcnRpYWw8RXRhQ29uZmlnPiB7XG4gIHJldHVybiBjb3B5UHJvcHMoY29uZmlnLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IHsgY29uZmlnLCBjb25maWd1cmUsIGdldENvbmZpZyB9O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQVMsU0FBUyxRQUFRLGlCQUFpQixDQUFDO0FBQzVDLFNBQVMsU0FBUyxFQUFFLFNBQVMsUUFBUSxZQUFZLENBQUM7QUFDbEQsT0FBTyxNQUFNLE1BQU0sVUFBVSxDQUFDO0FBa0c5QixhQUFhLEdBRWI7Ozs7Q0FJQyxHQUVELFNBQVMsYUFBYSxDQUVwQixrQkFBMEIsRUFDMUIsSUFBWSxFQUNKO0lBQ1IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsQUFBQztJQUN4RCxJQUFJLENBQUMsUUFBUSxFQUFFO1FBQ2IsTUFBTSxNQUFNLENBQUMsNEJBQTRCLEdBQUcsa0JBQWtCLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUNELE9BQU8sUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QixDQUFDO0FBRUQsc0NBQXNDLEdBQ3RDLE1BQU0sTUFBTSxHQUFjO0lBQ3hCLEtBQUssRUFBRSxLQUFLO0lBQ1osVUFBVSxFQUFFLElBQUk7SUFDaEIsUUFBUSxFQUFFO1FBQUMsS0FBSztRQUFFLElBQUk7S0FBQztJQUN2QixLQUFLLEVBQUUsS0FBSztJQUNaLENBQUMsRUFBRSxTQUFTO0lBQ1osT0FBTyxFQUFFLGFBQWE7SUFDdEIsS0FBSyxFQUFFO1FBQ0wsSUFBSSxFQUFFLEVBQUU7UUFDUixXQUFXLEVBQUUsR0FBRztRQUNoQixHQUFHLEVBQUUsR0FBRztLQUNUO0lBQ0QsT0FBTyxFQUFFLEVBQUU7SUFDWCxZQUFZLEVBQUUsS0FBSztJQUNuQixJQUFJLEVBQUU7UUFBQyxJQUFJO1FBQUUsSUFBSTtLQUFDO0lBQ2xCLFNBQVMsRUFBRSxTQUFTO0lBQ3BCLE9BQU8sRUFBRSxLQUFLO0lBQ2QsT0FBTyxFQUFFLElBQUk7Q0FDZCxBQUFDO0FBRUY7Ozs7Ozs7Ozs7O0NBV0MsR0FFRCxTQUFTLFNBQVMsQ0FBQyxRQUF1QixFQUFFLFVBQXNCLEVBQWE7SUFDN0UsK0JBQStCO0lBRS9CLE1BQU0sR0FBRyxHQUFrQixFQUFFLEFBQUMsRUFBQyxTQUFTO0lBQ3hDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxpREFBaUQ7SUFFekUsSUFBSSxVQUFVLEVBQUU7UUFDZCxTQUFTLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLFFBQVEsRUFBRTtRQUNaLFNBQVMsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVELE9BQU8sR0FBRyxDQUFjO0FBQzFCLENBQUM7QUFFRCw2QkFBNkIsR0FFN0IsU0FBUyxTQUFTLENBQUMsT0FBc0IsRUFBc0I7SUFDN0QsT0FBTyxTQUFTLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3BDLENBQUM7QUFFRCxTQUFTLE1BQU0sRUFBRSxTQUFTLEVBQUUsU0FBUyxHQUFHIn0=